/**
 * dat-gui JavaScript Controller Library
 * http://code.google.com/p/dat-gui
 *
 * Copyright 2011 Data Arts Team, Google Creative Lab
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */
/*
 FastClick: polyfill to remove click delays on browsers with touch UIs.

 @codingstandard ftlabs-jsv2
 @copyright The Financial Times Limited [All Rights Reserved]
 @license MIT License (see LICENSE.txt)
*/
var dat=dat||{};dat.gui=dat.gui||{};dat.utils=dat.utils||{};dat.controllers=dat.controllers||{};dat.dom=dat.dom||{};dat.color=dat.color||{};dat.utils.css=function(){return{load:function(d,b){b=b||document;var f=b.createElement("link");f.type="text/css";f.rel="stylesheet";f.href=d;b.getElementsByTagName("head")[0].appendChild(f)},inject:function(d,b){b=b||document;var f=document.createElement("style");f.type="text/css";f.innerHTML=d;b.getElementsByTagName("head")[0].appendChild(f)}}}();
dat.utils.common=function(){var d=Array.prototype.forEach,b=Array.prototype.slice;return{BREAK:{},extend:function(f){this.each(b.call(arguments,1),function(b){for(var e in b)this.isUndefined(b[e])||(f[e]=b[e])},this);return f},defaults:function(f){this.each(b.call(arguments,1),function(b){for(var e in b)this.isUndefined(f[e])&&(f[e]=b[e])},this);return f},compose:function(){var f=b.call(arguments);return function(){for(var c=b.call(arguments),e=f.length-1;0<=e;e--)c=[f[e].apply(this,c)];return c[0]}},
each:function(b,c,e){if(b)if(d&&b.forEach&&b.forEach===d)b.forEach(c,e);else if(b.length===b.length+0)for(var a=0,n=b.length;a<n&&!(a in b&&c.call(e,b[a],a)===this.BREAK);a++);else for(a in b)if(c.call(e,b[a],a)===this.BREAK)break},defer:function(b){setTimeout(b,0)},toArray:function(f){return f.toArray?f.toArray():b.call(f)},isUndefined:function(b){return void 0===b},isNull:function(b){return null===b},isNaN:function(b){return b!==b},isArray:Array.isArray||function(b){return b.constructor===Array},
isObject:function(b){return b===Object(b)},isNumber:function(b){return b===b+0},isString:function(b){return b===b+""},isBoolean:function(b){return!1===b||!0===b},isFunction:function(b){return"[object Function]"===Object.prototype.toString.call(b)}}}();
dat.controllers.Controller=function(d){var b=function(b,c){this.initialValue=b[c];this.domElement=document.createElement("div");this.object=b;this.property=c;this.__onFinishChange=this.__onChange=void 0};d.extend(b.prototype,{onChange:function(b){this.__onChange=b;return this},onFinishChange:function(b){this.__onFinishChange=b;return this},setValue:function(b){this.object[this.property]=b;this.__onChange&&this.__onChange.call(this,b);this.updateDisplay();return this},getValue:function(){return this.object[this.property]},
updateDisplay:function(){return this},isModified:function(){return this.initialValue!==this.getValue()}});return b}(dat.utils.common);
dat.dom.dom=function(d){function b(a){if("0"===a||d.isUndefined(a))return 0;a=a.match(c);return d.isNull(a)?0:parseFloat(a[1])}var f={};d.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(a,b){d.each(a,function(a){f[a]=b})});var c=/(\d+(\.\d+)?)px/,e={makeSelectable:function(a,b){void 0!==a&&void 0!==a.style&&(a.onselectstart=b?function(){return!1}:function(){},a.style.MozUserSelect=b?"auto":"none",a.style.KhtmlUserSelect=
b?"auto":"none",a.unselectable=b?"on":"off")},makeFullscreen:function(a,b,e){d.isUndefined(b)&&(b=!0);d.isUndefined(e)&&(e=!0);a.style.position="absolute";b&&(a.style.left=0,a.style.right=0);e&&(a.style.top=0,a.style.bottom=0)},fakeEvent:function(a,b,e,c){e=e||{};var q=f[b];if(!q)throw Error("Event type "+b+" not supported.");var r=document.createEvent(q);switch(q){case "MouseEvents":r.initMouseEvent(b,e.bubbles||!1,e.cancelable||!0,window,e.clickCount||1,0,0,e.x||e.clientX||0,e.y||e.clientY||0,!1,
!1,!1,!1,0,null);break;case "KeyboardEvents":q=r.initKeyboardEvent||r.initKeyEvent;d.defaults(e,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0});q(b,e.bubbles||!1,e.cancelable,window,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.keyCode,e.charCode);break;default:r.initEvent(b,e.bubbles||!1,e.cancelable||!0)}d.defaults(r,c);a.dispatchEvent(r)},bind:function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c);return e},
unbind:function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d||!1):a.detachEvent&&a.detachEvent("on"+b,c);return e},addClass:function(a,b){if(void 0===a.className)a.className=b;else if(a.className!==b){var c=a.className.split(/ +/);-1==c.indexOf(b)&&(c.push(b),a.className=c.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return e},removeClass:function(a,b){if(b){if(void 0!==a.className)if(a.className===b)a.removeAttribute("class");else{var c=a.className.split(/ +/),d=c.indexOf(b);-1!=
d&&(c.splice(d,1),a.className=c.join(" "))}}else a.className=void 0;return e},hasClass:function(a,b){return(new RegExp("(?:^|\\s+)"+b+"(?:\\s+|$)")).test(a.className)||!1},getWidth:function(a){a=getComputedStyle(a);return b(a["border-left-width"])+b(a["border-right-width"])+b(a["padding-left"])+b(a["padding-right"])+b(a.width)},getHeight:function(a){a=getComputedStyle(a);return b(a["border-top-width"])+b(a["border-bottom-width"])+b(a["padding-top"])+b(a["padding-bottom"])+b(a.height)},getOffset:function(a){var b=
{left:0,top:0};if(a.offsetParent){do b.left+=a.offsetLeft,b.top+=a.offsetTop;while(a=a.offsetParent)}return b},isActive:function(a){return a===document.activeElement&&(a.type||a.href)}};return e}(dat.utils.common);
dat.controllers.OptionController=function(d,b,f){var c=function(e,a,d){c.superclass.call(this,e,a);var h=this;this.__select=document.createElement("select");if(f.isArray(d)){var k={};f.each(d,function(a){k[a]=a});d=k}f.each(d,function(a,b){var e=document.createElement("option");e.innerHTML=b;e.setAttribute("value",a);h.__select.appendChild(e)});this.updateDisplay();b.bind(this.__select,"change",function(){h.setValue(this.options[this.selectedIndex].value)});this.domElement.appendChild(this.__select)};
c.superclass=d;f.extend(c.prototype,d.prototype,{setValue:function(b){b=c.superclass.prototype.setValue.call(this,b);this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue());return b},updateDisplay:function(){this.__select.value=this.getValue();return c.superclass.prototype.updateDisplay.call(this)}});return c}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.controllers.NumberController=function(d,b){function f(b){b=b.toString();return-1<b.indexOf(".")?b.length-b.indexOf(".")-1:0}var c=function(e,a,d){c.superclass.call(this,e,a);d=d||{};this.__min=d.min;this.__max=d.max;this.__step=d.step;b.isUndefined(this.__step)?this.__impliedStep=0==this.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(this.initialValue))/Math.LN10))/10:this.__impliedStep=this.__step;this.__precision=f(this.__impliedStep)};c.superclass=d;b.extend(c.prototype,d.prototype,
{setValue:function(b){void 0!==this.__min&&b<this.__min?b=this.__min:void 0!==this.__max&&b>this.__max&&(b=this.__max);void 0!==this.__step&&0!=b%this.__step&&(b=Math.round(b/this.__step)*this.__step);return c.superclass.prototype.setValue.call(this,b)},min:function(b){this.__min=b;return this},max:function(b){this.__max=b;return this},step:function(b){this.__impliedStep=this.__step=b;this.__precision=f(b);return this}});return c}(dat.controllers.Controller,dat.utils.common);
dat.utils.pointer=function(){var d="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints,b,f,c;d?(b="touchstart",f="touchend",c="touchmove"):(b="mousedown",f="mouseup",c="mousemove");return{start:b,end:f,move:c,isTouch:d}}();
dat.controllers.NumberControllerBox=function(d,b,f,c){var e=function(a,d,h){function k(){var a=parseFloat(p.__input.value);f.isNaN(a)||p.setValue(a)}function q(a){a=c.isTouch?a.touches[0].clientY:a.clientY;var b=v-a;p.setValue(p.getValue()+b*p.__impliedStep);console.log(b);v=a}function r(){b.unbind(window,c.move,q);b.unbind(window,c.end,r)}this.__truncationSuspended=!1;e.superclass.call(this,a,d,h);var p=this,v;this.__input=document.createElement("input");this.__input.setAttribute("type","text");
b.bind(this.__input,"change",k);b.bind(this.__input,"blur",function(){k();p.__onFinishChange&&p.__onFinishChange.call(p,p.getValue())});b.bind(this.__input,c.start,function(a){b.bind(window,c.move,q);b.bind(window,c.end,r);v=c.isTouch?a.touches[0].clientY:a.clientY});b.bind(this.__input,"keydown",function(a){13===a.keyCode&&(p.__truncationSuspended=!0,this.blur(),p.__truncationSuspended=!1)});this.updateDisplay();this.domElement.appendChild(this.__input)};e.superclass=d;f.extend(e.prototype,d.prototype,
{updateDisplay:function(){var a=this.__input,b;if(this.__truncationSuspended)b=this.getValue();else{b=this.getValue();var c=Math.pow(10,this.__precision);b=Math.round(b*c)/c}a.value=b;return e.superclass.prototype.updateDisplay.call(this)}});return e}(dat.controllers.NumberController,dat.dom.dom,dat.utils.common,dat.utils.pointer);
dat.controllers.NumberControllerSlider=function(d,b,f,c,e,a){function n(a,b,c,e,d){return e+(a-b)/(c-b)*(d-e)}var h=function(a,c,d,f,v){function g(a){a.preventDefault();var c=b.getOffset(u.__background),d=b.getWidth(u.__background);u.setValue(n(e.isTouch?a.touches[0].clientX:a.clientX,c.left,c.left+d,u.__min,u.__max));return!1}function l(){b.unbind(window,e.move,g);b.unbind(window,e.end,l);u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}h.superclass.call(this,a,c,{min:d,max:f,step:v});
var u=this;this.__background=document.createElement("div");this.__foreground=document.createElement("div");b.bind(this.__background,e.start,function(a){console.log("onMouseDown",a);b.bind(window,e.move,g);b.bind(window,e.end,l);g(a)});b.addClass(this.__background,"slider");b.addClass(this.__foreground,"slider-fg");this.updateDisplay();this.__background.appendChild(this.__foreground);this.domElement.appendChild(this.__background)};h.superclass=d;h.useDefaultStyles=function(){f.inject(a)};c.extend(h.prototype,
d.prototype,{updateDisplay:function(){var a=(this.getValue()-this.__min)/(this.__max-this.__min);this.__foreground.style.width=100*a+"%";return h.superclass.prototype.updateDisplay.call(this)}});return h}(dat.controllers.NumberController,dat.dom.dom,dat.utils.css,dat.utils.common,dat.utils.pointer,"/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}");
dat.controllers.FunctionController=function(d,b,f){var c=function(e,a,d){c.superclass.call(this,e,a);var f=this;this.__button=document.createElement("div");this.__button.innerHTML=void 0===d?"Fire":d;b.bind(this.__button,"click",function(a){a.preventDefault();f.fire();return!1});b.addClass(this.__button,"button");this.domElement.appendChild(this.__button)};c.superclass=d;f.extend(c.prototype,d.prototype,{fire:function(){this.__onChange&&this.__onChange.call(this);this.getValue().call(this.object);
this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}});return c}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.controllers.BooleanController=function(d,b,f){var c=function(d,a){c.superclass.call(this,d,a);var f=this;this.__prev=this.getValue();this.__checkbox=document.createElement("input");this.__checkbox.setAttribute("type","checkbox");b.bind(this.__checkbox,"change",function(){f.setValue(!f.__prev)},!1);this.domElement.appendChild(this.__checkbox);this.updateDisplay()};c.superclass=d;f.extend(c.prototype,d.prototype,{setValue:function(b){b=c.superclass.prototype.setValue.call(this,b);this.__onFinishChange&&
this.__onFinishChange.call(this,this.getValue());this.__prev=this.getValue();return b},updateDisplay:function(){!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0):this.__checkbox.checked=!1;return c.superclass.prototype.updateDisplay.call(this)}});return c}(dat.controllers.Controller,dat.dom.dom,dat.utils.common);
dat.color.toString=function(d){return function(b){if(1==b.a||d.isUndefined(b.a)){for(b=b.hex.toString(16);6>b.length;)b="0"+b;return"#"+b}return"rgba("+Math.round(b.r)+","+Math.round(b.g)+","+Math.round(b.b)+","+b.a+")"}}(dat.utils.common);
dat.color.interpret=function(d,b){var f,c,e=[{litmus:b.isString,conversions:{THREE_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString()+a[1].toString()+a[2].toString()+a[2].toString()+a[3].toString()+a[3].toString())}},write:d},SIX_CHAR_HEX:{read:function(a){a=a.match(/^#([A-F0-9]{6})$/i);return null===a?!1:{space:"HEX",hex:parseInt("0x"+a[1].toString())}},write:d},CSS_RGB:{read:function(a){a=a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3])}},write:d},CSS_RGBA:{read:function(a){a=a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);return null===a?!1:{space:"RGB",r:parseFloat(a[1]),g:parseFloat(a[2]),b:parseFloat(a[3]),a:parseFloat(a[4])}},write:d}}},{litmus:b.isNumber,conversions:{HEX:{read:function(a){return{space:"HEX",hex:a,conversionName:"HEX"}},write:function(a){return a.hex}}}},{litmus:b.isArray,conversions:{RGB_ARRAY:{read:function(a){return 3!=
a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2]}},write:function(a){return[a.r,a.g,a.b]}},RGBA_ARRAY:{read:function(a){return 4!=a.length?!1:{space:"RGB",r:a[0],g:a[1],b:a[2],a:a[3]}},write:function(a){return[a.r,a.g,a.b,a.a]}}}},{litmus:b.isObject,conversions:{RGBA_OBJ:{read:function(a){return b.isNumber(a.r)&&b.isNumber(a.g)&&b.isNumber(a.b)&&b.isNumber(a.a)?{space:"RGB",r:a.r,g:a.g,b:a.b,a:a.a}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b,a:a.a}}},RGB_OBJ:{read:function(a){return b.isNumber(a.r)&&
b.isNumber(a.g)&&b.isNumber(a.b)?{space:"RGB",r:a.r,g:a.g,b:a.b}:!1},write:function(a){return{r:a.r,g:a.g,b:a.b}}},HSVA_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)&&b.isNumber(a.a)?{space:"HSV",h:a.h,s:a.s,v:a.v,a:a.a}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v,a:a.a}}},HSV_OBJ:{read:function(a){return b.isNumber(a.h)&&b.isNumber(a.s)&&b.isNumber(a.v)?{space:"HSV",h:a.h,s:a.s,v:a.v}:!1},write:function(a){return{h:a.h,s:a.s,v:a.v}}}}}];return function(){c=!1;
var a=1<arguments.length?b.toArray(arguments):arguments[0];b.each(e,function(d){if(d.litmus(a))return b.each(d.conversions,function(d,e){f=d.read(a);if(!1===c&&!1!==f)return c=f,f.conversionName=e,f.conversion=d,b.BREAK}),b.BREAK});return c}}(dat.color.toString,dat.utils.common);
dat.GUI=dat.gui.GUI=function(d,b,f,c,e,a,n,h,k,q,r,p,v,g,l,u){function w(a,b,d,f){if(void 0===b[d])throw Error("Object "+b+' has no property "'+d+'"');f.color?b=new r(b,d):(b=[b,d].concat(f.factoryArgs),b=c.apply(a,b));f.before instanceof e&&(f.before=f.before.__li);H(a,b);g.addClass(b.domElement,"c");d=document.createElement("span");g.addClass(d,"property-name");d.innerHTML=b.property;var h=document.createElement("div");h.appendChild(d);h.appendChild(b.domElement);f=t(a,h,f.before);g.addClass(f,
m.CLASS_CONTROLLER_ROW);g.addClass(f,typeof b.getValue());z(a,f,b);a.__controllers.push(b);return b}function t(a,b,d){var c=document.createElement("li");b&&c.appendChild(b);d?a.__ul.insertBefore(c,params.before):a.__ul.appendChild(c);a.onResize();return c}function z(b,d,c){c.__li=d;c.__gui=b;l.extend(c,{options:function(a){if(1<arguments.length)return c.remove(),w(b,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[l.toArray(arguments)]});if(l.isArray(a)||l.isObject(a))return c.remove(),
w(b,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[a]})},name:function(a){c.__li.firstElementChild.firstElementChild.innerHTML=a;return c},listen:function(){c.__gui.listen(c);return c},remove:function(){c.__gui.remove(c);return c}});if(c instanceof k){var e=new h(c.object,c.property,{min:c.__min,max:c.__max,step:c.__step});l.each(["updateDisplay","onChange","onFinishChange"],function(a){var b=c[a],G=e[a];c[a]=e[a]=function(){var a=Array.prototype.slice.call(arguments);b.apply(c,
a);return G.apply(e,a)}});g.addClass(d,"has-slider");c.domElement.insertBefore(e.domElement,c.domElement.firstElementChild)}else if(c instanceof h){var f=function(a){return l.isNumber(c.__min)&&l.isNumber(c.__max)?(c.remove(),w(b,c.object,c.property,{before:c.__li.nextElementSibling,factoryArgs:[c.__min,c.__max,c.__step]})):a};c.min=l.compose(f,c.min);c.max=l.compose(f,c.max)}else c instanceof a?(g.bind(d,"click",function(){g.fakeEvent(c.__checkbox,"click")}),g.bind(c.__checkbox,"click",function(a){a.stopPropagation()})):
c instanceof n?(g.bind(d,"click",function(){g.fakeEvent(c.__button,"click")}),g.bind(d,"mouseover",function(){g.addClass(c.__button,"hover")}),g.bind(d,"mouseout",function(){g.removeClass(c.__button,"hover")})):c instanceof r&&(g.addClass(d,"color"),c.updateDisplay=l.compose(function(a){d.style.borderLeftColor=c.__color.toString();return a},c.updateDisplay),c.updateDisplay());c.setValue=l.compose(function(a){b.getRoot().__preset_select&&c.isModified()&&D(b.getRoot(),!0);return a},c.setValue)}function H(a,
b){var c=a.getRoot(),d=c.__rememberedObjects.indexOf(b.object);if(-1!=d){var e=c.__rememberedObjectIndecesToControllers[d];void 0===e&&(e={},c.__rememberedObjectIndecesToControllers[d]=e);e[b.property]=b;if(c.load&&c.load.remembered){c=c.load.remembered;if(c[a.preset])c=c[a.preset];else if(c.Default)c=c.Default;else return;c[d]&&void 0!==c[d][b.property]&&(d=c[d][b.property],b.initialValue=d,b.setValue(d))}}}function L(a){var b=a.__save_row=document.createElement("li");g.addClass(a.domElement,"has-save");
a.__ul.insertBefore(b,a.__ul.firstChild);g.addClass(b,"save-row");var c=document.createElement("span");c.innerHTML="&nbsp;";g.addClass(c,"button gears");var d=document.createElement("span");d.innerHTML="Save";g.addClass(d,"button");g.addClass(d,"save");var e=document.createElement("span");e.innerHTML="New";g.addClass(e,"button");g.addClass(e,"save-as");var f=document.createElement("span");f.innerHTML="Revert";g.addClass(f,"button");g.addClass(f,"revert");var h=a.__preset_select=document.createElement("select");
a.load&&a.load.remembered?l.each(a.load.remembered,function(b,c){E(a,c,c==a.preset)}):E(a,"Default",!1);g.bind(h,"change",function(){for(var b=0;b<a.__preset_select.length;b++)a.__preset_select[b].innerHTML=a.__preset_select[b].value;a.preset=this.value});b.appendChild(h);b.appendChild(c);b.appendChild(d);b.appendChild(e);b.appendChild(f);if(x){var n=function(){q.style.display=a.useLocalStorage?"block":"none"},b=document.getElementById("dg-save-locally"),q=document.getElementById("dg-local-explain");
b.style.display="block";b=document.getElementById("dg-local-storage");"true"===localStorage.getItem(document.location.href+".isLocal")&&b.setAttribute("checked","checked");n();g.bind(b,"change",function(){a.useLocalStorage=!a.useLocalStorage;n()})}var k=document.getElementById("dg-new-constructor");g.bind(k,"keydown",function(a){!a.metaKey||67!==a.which&&67!=a.keyCode||A.hide()});g.bind(c,"click",function(){k.innerHTML=JSON.stringify(a.getSaveObject(),void 0,2);A.show();k.focus();k.select()});g.bind(d,
"click",function(){a.save()});g.bind(e,"click",function(){var b=prompt("Enter a new preset name.");b&&a.saveAs(b)});g.bind(f,"click",function(){a.revert()})}function M(a){function b(f){f.preventDefault();e=f.clientX;g.addClass(a.__closeButton,m.CLASS_DRAG);g.bind(window,"mousemove",c);g.bind(window,"mouseup",d);return!1}function c(b){b.preventDefault();a.width+=e-b.clientX;a.onResize();e=b.clientX;return!1}function d(){g.removeClass(a.__closeButton,m.CLASS_DRAG);g.unbind(window,"mousemove",c);g.unbind(window,
"mouseup",d)}a.__resize_handle=document.createElement("div");l.extend(a.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"});var e;g.bind(a.__resize_handle,"mousedown",b);g.bind(a.__closeButton,"mousedown",b);a.domElement.insertBefore(a.__resize_handle,a.domElement.firstElementChild)}function F(a,b){a.domElement.style.width=b+"px";a.__save_row&&a.autoPlace&&(a.__save_row.style.width=b+"px");a.__closeButton&&(a.__closeButton.style.width=b+"px")}
function B(a,b){var c={};l.each(a.__rememberedObjects,function(d,e){var f={};l.each(a.__rememberedObjectIndecesToControllers[e],function(a,c){f[c]=b?a.initialValue:a.getValue()});c[e]=f});return c}function E(a,b,c){var d=document.createElement("option");d.innerHTML=b;d.value=b;a.__preset_select.appendChild(d);c&&(a.__preset_select.selectedIndex=a.__preset_select.length-1)}function D(a,b){var c=a.__preset_select[a.__preset_select.selectedIndex];c.innerHTML=b?c.value+"*":c.value}function I(a){0!=a.length&&
p(function(){I(a)});l.each(a,function(a){a.updateDisplay()})}d.inject(f);"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){u.attach(document.body)},!1);var x;try{x="localStorage"in window&&null!==window.localStorage}catch(G){x=!1}var A,J=!0,y,C=!1,K=[],m=function(a){function b(){var a=c.getRoot();a.width+=1;l.defer(function(){--a.width})}var c=this;this.domElement=document.createElement("div");this.__ul=document.createElement("ul");this.domElement.appendChild(this.__ul);
g.addClass(this.domElement,"dg");this.__folders={};this.__controllers=[];this.__rememberedObjects=[];this.__rememberedObjectIndecesToControllers=[];this.__listening=[];a=a||{};a=l.defaults(a,{autoPlace:!0,width:m.DEFAULT_WIDTH});a=l.defaults(a,{resizable:a.autoPlace,hideable:a.autoPlace});l.isUndefined(a.load)?a.load={preset:"Default"}:a.preset&&(a.load.preset=a.preset);l.isUndefined(a.parent)&&a.hideable&&K.push(this);a.resizable=l.isUndefined(a.parent)&&a.resizable;a.autoPlace&&l.isUndefined(a.scrollable)&&
(a.scrollable=!0);var d=x&&"true"===localStorage.getItem(document.location.href+".isLocal"),e;Object.defineProperties(this,{parent:{get:function(){return a.parent}},scrollable:{get:function(){return a.scrollable}},autoPlace:{get:function(){return a.autoPlace}},preset:{get:function(){return c.parent?c.getRoot().preset:a.load.preset},set:function(b){c.parent?c.getRoot().preset=b:a.load.preset=b;for(b=0;b<this.__preset_select.length;b++)this.__preset_select[b].value==this.preset&&(this.__preset_select.selectedIndex=
b);c.revert()}},width:{get:function(){return a.width},set:function(b){a.width=b;F(c,b)}},name:{get:function(){return a.name},set:function(b){a.name=b;h&&(h.innerHTML=a.name)}},closed:{get:function(){return a.closed},set:function(b){a.closed=b;a.closed?g.addClass(c.__ul,m.CLASS_CLOSED):g.removeClass(c.__ul,m.CLASS_CLOSED);this.onResize();c.__closeButton&&(c.__closeButton.innerHTML=b?m.TEXT_OPEN:m.TEXT_CLOSED)}},load:{get:function(){return a.load}},useLocalStorage:{get:function(){return d},set:function(a){x&&
((d=a)?g.bind(window,"unload",e):g.unbind(window,"unload",e),localStorage.setItem(document.location.href+".isLocal",a))}}});if(l.isUndefined(a.parent)){a.closed=!1;g.addClass(this.domElement,m.CLASS_MAIN);g.makeSelectable(this.domElement,!1);if(x&&d){c.useLocalStorage=!0;var f=localStorage.getItem(document.location.href+".gui");f&&(a.load=JSON.parse(f))}this.__closeButton=document.createElement("div");this.__closeButton.innerHTML=m.TEXT_CLOSED;g.addClass(this.__closeButton,m.CLASS_CLOSE_BUTTON);this.domElement.appendChild(this.__closeButton);
g.bind(this.__closeButton,"click",function(){c.closed=!c.closed})}else{void 0===a.closed&&(a.closed=!0);var h=document.createTextNode(a.name);g.addClass(h,"controller-name");f=t(c,h);g.addClass(this.__ul,m.CLASS_CLOSED);g.addClass(f,"title");g.bind(f,"click",function(a){a.preventDefault();c.closed=!c.closed;return!1});a.closed||(this.closed=!1)}a.autoPlace&&(l.isUndefined(a.parent)&&(J&&(y=document.createElement("div"),g.addClass(y,"dg"),g.addClass(y,m.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(y),
J=!1),y.appendChild(this.domElement),g.addClass(this.domElement,m.CLASS_AUTO_PLACE)),this.parent||F(c,a.width));g.bind(window,"resize",function(){c.onResize()});g.bind(this.__ul,"webkitTransitionEnd",function(){c.onResize()});g.bind(this.__ul,"transitionend",function(){c.onResize()});g.bind(this.__ul,"oTransitionEnd",function(){c.onResize()});this.onResize();a.resizable&&M(this);this.saveToLocalStorageIfPossible=e=function(){x&&"true"===localStorage.getItem(document.location.href+".isLocal")&&localStorage.setItem(document.location.href+
".gui",JSON.stringify(c.getSaveObject()))};c.getRoot();a.parent||b()};m.toggleHide=function(){C=!C;l.each(K,function(a){a.domElement.style.zIndex=C?-999:999;a.domElement.style.opacity=C?0:1})};m.CLASS_AUTO_PLACE="a";m.CLASS_AUTO_PLACE_CONTAINER="ac";m.CLASS_MAIN="main";m.CLASS_CONTROLLER_ROW="cr";m.CLASS_TOO_TALL="taller-than-window";m.CLASS_CLOSED="closed";m.CLASS_CLOSE_BUTTON="close-button";m.CLASS_DRAG="drag";m.DEFAULT_WIDTH=245;m.TEXT_CLOSED="Close Controls";m.TEXT_OPEN="Open Controls";g.bind(window,
"keydown",function(a){"text"===document.activeElement.type||72!==a.which&&72!=a.keyCode||m.toggleHide()},!1);l.extend(m.prototype,{add:function(a,b){return w(this,a,b,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(a,b){return w(this,a,b,{color:!0})},remove:function(a){this.__ul.removeChild(a.__li);this.__controllers.splice(this.__controllers.indexOf(a),1);var b=this;l.defer(function(){b.onResize()})},destroy:function(){this.autoPlace&&y.removeChild(this.domElement)},addFolder:function(a){if(void 0!==
this.__folders[a])throw Error('You already have a folder in this GUI by the name "'+a+'"');var b={name:a,parent:this};b.autoPlace=this.autoPlace;this.load&&this.load.folders&&this.load.folders[a]&&(b.closed=this.load.folders[a].closed,b.load=this.load.folders[a]);b=new m(b);this.__folders[a]=b;a=t(this,b.domElement);g.addClass(a,"folder");return b},open:function(){this.closed=!1},close:function(){this.closed=!0},onResize:function(){var a=this.getRoot();if(a.scrollable){var b=g.getOffset(a.__ul).top,
c=0;l.each(a.__ul.childNodes,function(b){a.autoPlace&&b===a.__save_row||(c+=g.getHeight(b))});window.innerHeight-b-20<c?(g.addClass(a.domElement,m.CLASS_TOO_TALL),a.__ul.style.height=window.innerHeight-b-20+"px"):(g.removeClass(a.domElement,m.CLASS_TOO_TALL),a.__ul.style.height="auto")}a.__resize_handle&&l.defer(function(){a.__resize_handle.style.height=a.__ul.offsetHeight+"px"});a.__closeButton&&(a.__closeButton.style.width=a.width+"px")},remember:function(){l.isUndefined(A)&&(A=new v,A.domElement.innerHTML=
b);if(this.parent)throw Error("You can only call remember on a top level GUI.");var a=this;l.each(Array.prototype.slice.call(arguments),function(b){0==a.__rememberedObjects.length&&L(a);-1==a.__rememberedObjects.indexOf(b)&&a.__rememberedObjects.push(b)});this.autoPlace&&F(this,this.width)},getRoot:function(){for(var a=this;a.parent;)a=a.parent;return a},getSaveObject:function(){var a=this.load;a.closed=this.closed;0<this.__rememberedObjects.length&&(a.preset=this.preset,a.remembered||(a.remembered=
{}),a.remembered[this.preset]=B(this));a.folders={};l.each(this.__folders,function(b,c){a.folders[c]=b.getSaveObject()});return a},save:function(){this.load.remembered||(this.load.remembered={});this.load.remembered[this.preset]=B(this);D(this,!1);this.saveToLocalStorageIfPossible()},saveAs:function(a){this.load.remembered||(this.load.remembered={},this.load.remembered.Default=B(this,!0));this.load.remembered[a]=B(this);this.preset=a;E(this,a,!0);this.saveToLocalStorageIfPossible()},revert:function(a){l.each(this.__controllers,
function(b){this.getRoot().load.remembered?H(a||this.getRoot(),b):b.setValue(b.initialValue)},this);l.each(this.__folders,function(a){a.revert(a)});a||D(this.getRoot(),!1)},listen:function(a){var b=0==this.__listening.length;this.__listening.push(a);b&&I(this.__listening)}});return m}(dat.utils.css,'<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>',
".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n\n\n@media (max-width: 600px) {\n  .dg li:not(.folder) {\n    height: 60px;\n  }\n  .dg.a {\n    margin-right: 0;\n    float: none;\n  }\n  .dg.main.a {\n    width: 100% !important;\n  }\n\n  .close-button .drag {\n    width: 100% !important;\n  }\n\n  input {\n    font-size: 40px;\n  }\n\n  .dg .property-name {\n    width: 30%;\n  }\n\n  .dg .c {\n    width: 70%;\n  }\n\n  .dg .slider {\n    height: 52px;\n  }\n\n  .property-name {\n    font-size: 20px;\n  }\n\n  .dg .c input[type=checkbox] {\n    margin-top: 24px;\n    -ms-transform: scale(3);\n    -moz-transform: scale(3);\n    -webkit-transform: scale(3);\n    -o-transform: scale(3);\n  }\n\n  .close-button {\n    font-size: 20px;\n    padding: 10px;\n    width: 100% !important;\n  }\n\n}",
dat.controllers.factory=function(d,b,f,c,e,a,n){return function(h,k,q,r){var p=h[k];if(n.isArray(q)||n.isObject(q))return new d(h,k,q);if(n.isNumber(p))return n.isNumber(q)&&n.isNumber(r)?new f(h,k,q,r):new b(h,k,{min:q,max:r});if(n.isString(p))return new c(h,k);if(n.isFunction(p))return new e(h,k,"");if(n.isBoolean(p))return new a(h,k)}}(dat.controllers.OptionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.StringController=function(d,b,f){var c=
function(d,a){function f(){h.setValue(h.__input.value)}c.superclass.call(this,d,a);var h=this;this.__input=document.createElement("input");this.__input.setAttribute("type","text");b.bind(this.__input,"keyup",f);b.bind(this.__input,"change",f);b.bind(this.__input,"blur",function(){h.__onFinishChange&&h.__onFinishChange.call(h,h.getValue())});b.bind(this.__input,"keydown",function(a){13===a.keyCode&&this.blur()});this.updateDisplay();this.domElement.appendChild(this.__input)};c.superclass=d;f.extend(c.prototype,
d.prototype,{updateDisplay:function(){b.isActive(this.__input)||(this.__input.value=this.getValue());return c.superclass.prototype.updateDisplay.call(this)}});return c}(dat.controllers.Controller,dat.dom.dom,dat.utils.common),dat.controllers.FunctionController,dat.controllers.BooleanController,dat.utils.common),dat.controllers.Controller,dat.controllers.BooleanController,dat.controllers.FunctionController,dat.controllers.NumberControllerBox,dat.controllers.NumberControllerSlider,dat.controllers.OptionController,
dat.controllers.ColorController=function(d,b,f,c,e){function a(a,b,c,d){a.style.background="";e.each(k,function(e){a.style.cssText+="background: "+e+"linear-gradient("+b+", "+c+" 0%, "+d+" 100%); "})}function n(a){a.style.background="";a.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);";a.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";
a.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);";a.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}var h=function(d,k){function p(a){u(a);b.bind(window,"mousemove",u);b.bind(window,
"mouseup",v)}function v(){b.unbind(window,"mousemove",u);b.unbind(window,"mouseup",v)}function g(){var a=c(this.value);!1!==a?(t.__color.__state=a,t.setValue(t.__color.toOriginal())):this.value=t.__color.toString()}function l(){b.unbind(window,"mousemove",w);b.unbind(window,"mouseup",l)}function u(a){a.preventDefault();var c=b.getWidth(t.__saturation_field),d=b.getOffset(t.__saturation_field),e=(a.clientX-d.left+document.body.scrollLeft)/c;a=1-(a.clientY-d.top+document.body.scrollTop)/c;1<a?a=1:0>
a&&(a=0);1<e?e=1:0>e&&(e=0);t.__color.v=a;t.__color.s=e;t.setValue(t.__color.toOriginal());return!1}function w(a){a.preventDefault();var c=b.getHeight(t.__hue_field),d=b.getOffset(t.__hue_field);a=1-(a.clientY-d.top+document.body.scrollTop)/c;1<a?a=1:0>a&&(a=0);t.__color.h=360*a;t.setValue(t.__color.toOriginal());return!1}h.superclass.call(this,d,k);this.__color=new f(this.getValue());this.__temp=new f(0);var t=this;this.domElement=document.createElement("div");b.makeSelectable(this.domElement,!1);
this.__selector=document.createElement("div");this.__selector.className="selector";this.__saturation_field=document.createElement("div");this.__saturation_field.className="saturation-field";this.__field_knob=document.createElement("div");this.__field_knob.className="field-knob";this.__field_knob_border="2px solid ";this.__hue_knob=document.createElement("div");this.__hue_knob.className="hue-knob";this.__hue_field=document.createElement("div");this.__hue_field.className="hue-field";this.__input=document.createElement("input");
this.__input.type="text";this.__input_textShadow="0 1px 1px ";b.bind(this.__input,"keydown",function(a){13===a.keyCode&&g.call(this)});b.bind(this.__input,"blur",g);b.bind(this.__selector,"mousedown",function(a){b.addClass(this,"drag").bind(window,"mouseup",function(a){b.removeClass(t.__selector,"drag")})});var z=document.createElement("div");e.extend(this.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"});e.extend(this.__field_knob.style,
{position:"absolute",width:"12px",height:"12px",border:this.__field_knob_border+(.5>this.__color.v?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1});e.extend(this.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1});e.extend(this.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"});e.extend(z.style,{width:"100%",height:"100%",
background:"none"});a(z,"top","rgba(0,0,0,0)","#000");e.extend(this.__hue_field.style,{width:"15px",height:"100px",display:"inline-block",border:"1px solid #555",cursor:"ns-resize"});n(this.__hue_field);e.extend(this.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:this.__input_textShadow+"rgba(0,0,0,0.7)"});b.bind(this.__saturation_field,"mousedown",p);b.bind(this.__field_knob,"mousedown",p);b.bind(this.__hue_field,"mousedown",function(a){w(a);b.bind(window,
"mousemove",w);b.bind(window,"mouseup",l)});this.__saturation_field.appendChild(z);this.__selector.appendChild(this.__field_knob);this.__selector.appendChild(this.__saturation_field);this.__selector.appendChild(this.__hue_field);this.__hue_field.appendChild(this.__hue_knob);this.domElement.appendChild(this.__input);this.domElement.appendChild(this.__selector);this.updateDisplay()};h.superclass=d;e.extend(h.prototype,d.prototype,{updateDisplay:function(){var b=c(this.getValue());if(!1!==b){var d=!1;
e.each(f.COMPONENTS,function(a){if(!e.isUndefined(b[a])&&!e.isUndefined(this.__color.__state[a])&&b[a]!==this.__color.__state[a])return d=!0,{}},this);d&&e.extend(this.__color.__state,b)}e.extend(this.__temp.__state,this.__color.__state);this.__temp.a=1;var h=.5>this.__color.v||.5<this.__color.s?255:0,n=255-h;e.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toString(),border:this.__field_knob_border+"rgb("+h+
","+h+","+h+")"});this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px";this.__temp.s=1;this.__temp.v=1;a(this.__saturation_field,"left","#fff",this.__temp.toString());e.extend(this.__input.style,{backgroundColor:this.__input.value=this.__color.toString(),color:"rgb("+h+","+h+","+h+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}});var k=["-moz-","-o-","-webkit-","-ms-",""];return h}(dat.controllers.Controller,dat.dom.dom,dat.color.Color=function(d,b,f,c){function e(a,
b,c){Object.defineProperty(a,b,{get:function(){if("RGB"===this.__state.space)return this.__state[b];n(this,b,c);return this.__state[b]},set:function(a){"RGB"!==this.__state.space&&(n(this,b,c),this.__state.space="RGB");this.__state[b]=a}})}function a(a,b){Object.defineProperty(a,b,{get:function(){if("HSV"===this.__state.space)return this.__state[b];h(this);return this.__state[b]},set:function(a){"HSV"!==this.__state.space&&(h(this),this.__state.space="HSV");this.__state[b]=a}})}function n(a,d,e){if("HEX"===
a.__state.space)a.__state[d]=b.component_from_hex(a.__state.hex,e);else if("HSV"===a.__state.space)c.extend(a.__state,b.hsv_to_rgb(a.__state.h,a.__state.s,a.__state.v));else throw"Corrupted color state";}function h(a){var d=b.rgb_to_hsv(a.r,a.g,a.b);c.extend(a.__state,{s:d.s,v:d.v});c.isNaN(d.h)?c.isUndefined(a.__state.h)&&(a.__state.h=0):a.__state.h=d.h}var k=function(){this.__state=d.apply(this,arguments);if(!1===this.__state)throw"Failed to interpret color arguments";this.__state.a=this.__state.a||
1};k.COMPONENTS="r g b h s v hex a".split(" ");c.extend(k.prototype,{toString:function(){return f(this)},toOriginal:function(){return this.__state.conversion.write(this)}});e(k.prototype,"r",2);e(k.prototype,"g",1);e(k.prototype,"b",0);a(k.prototype,"h");a(k.prototype,"s");a(k.prototype,"v");Object.defineProperty(k.prototype,"a",{get:function(){return this.__state.a},set:function(a){this.__state.a=a}});Object.defineProperty(k.prototype,"hex",{get:function(){"HEX"!==!this.__state.space&&(this.__state.hex=
b.rgb_to_hex(this.r,this.g,this.b));return this.__state.hex},set:function(a){this.__state.space="HEX";this.__state.hex=a}});return k}(dat.color.interpret,dat.color.math=function(){var d;return{hsv_to_rgb:function(b,d,c){var e=b/60-Math.floor(b/60),a=c*(1-d),n=c*(1-e*d);d=c*(1-(1-e)*d);b=[[c,d,a],[n,c,a],[a,c,d],[a,n,c],[d,a,c],[c,a,n]][Math.floor(b/60)%6];return{r:255*b[0],g:255*b[1],b:255*b[2]}},rgb_to_hsv:function(b,d,c){var e=Math.max(b,d,c),a=e-Math.min(b,d,c);if(0==e)return{h:NaN,s:0,v:0};b=
(b==e?(d-c)/a:d==e?2+(c-b)/a:4+(b-d)/a)/6;0>b&&(b+=1);return{h:360*b,s:a/e,v:e/255}},rgb_to_hex:function(b,d,c){b=this.hex_with_component(0,2,b);b=this.hex_with_component(b,1,d);return b=this.hex_with_component(b,0,c)},component_from_hex:function(b,d){return b>>8*d&255},hex_with_component:function(b,f,c){return c<<(d=8*f)|b&~(255<<d)}}}(),dat.color.toString,dat.utils.common),dat.color.interpret,dat.utils.common),dat.utils.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(d,b){window.setTimeout(d,1E3/60)}}(),dat.dom.CenteredDiv=function(d,b){var f=function(){this.backgroundElement=document.createElement("div");b.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"});d.makeFullscreen(this.backgroundElement);this.backgroundElement.style.position=
"fixed";this.domElement=document.createElement("div");b.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"});document.body.appendChild(this.backgroundElement);document.body.appendChild(this.domElement);var c=this;d.bind(this.backgroundElement,"click",function(){c.hide()})};f.prototype.show=function(){var c=this;this.backgroundElement.style.display=
"block";this.domElement.style.display="block";this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)";this.layout();b.defer(function(){c.backgroundElement.style.opacity=1;c.domElement.style.opacity=1;c.domElement.style.webkitTransform="scale(1)"})};f.prototype.hide=function(){var b=this,e=function(){b.domElement.style.display="none";b.backgroundElement.style.display="none";d.unbind(b.domElement,"webkitTransitionEnd",e);d.unbind(b.domElement,"transitionend",e);d.unbind(b.domElement,
"oTransitionEnd",e)};d.bind(this.domElement,"webkitTransitionEnd",e);d.bind(this.domElement,"transitionend",e);d.bind(this.domElement,"oTransitionEnd",e);this.backgroundElement.style.opacity=0;this.domElement.style.opacity=0;this.domElement.style.webkitTransform="scale(1.1)"};f.prototype.layout=function(){this.domElement.style.left=window.innerWidth/2-d.getWidth(this.domElement)/2+"px";this.domElement.style.top=window.innerHeight/2-d.getHeight(this.domElement)/2+"px"};return f}(dat.dom.dom,dat.utils.common),
dat.dom.dom,dat.utils.common,dat.utils.fastclick=function(){function d(a,c){function e(a,b){return function(){return a.apply(b,arguments)}}var f;c=c||{};this.trackingClick=!1;this.trackingClickStart=0;this.targetElement=null;this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0;this.touchBoundary=c.touchBoundary||10;this.layer=a;this.tapDelay=c.tapDelay||200;this.tapTimeout=c.tapTimeout||700;if(!d.notNeeded(a)){for(var q="onMouse onClick onTouchStart onTouchMove onTouchEnd onTouchCancel".split(" "),
r=0,p=q.length;r<p;r++)this[q[r]]=e(this[q[r]],this);b&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0));a.addEventListener("click",this.onClick,!0);a.addEventListener("touchstart",this.onTouchStart,!1);a.addEventListener("touchmove",this.onTouchMove,!1);a.addEventListener("touchend",this.onTouchEnd,!1);a.addEventListener("touchcancel",this.onTouchCancel,!1);Event.prototype.stopImmediatePropagation||(a.removeEventListener=
function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)});"function"===typeof a.onclick&&(f=a.onclick,a.addEventListener("click",function(a){f(a)},!1),a.onclick=null)}}var b=!1,f=/iP(ad|hone|od)/.test("Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53")&&
!0,c=f&&/OS 4_\d(_\d)?/.test("Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53"),e=f&&/OS [6-7]_\d/.test("Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53");d.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case "button":case "select":case "textarea":if(a.disabled)return!0;break;case "input":if(f&&
"file"===a.type||a.disabled)return!0;break;case "label":case "iframe":case "video":return!0}return/\bneedsclick\b/.test(a.className)};d.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case "textarea":return!0;case "select":return!b;case "input":switch(a.type){case "button":case "checkbox":case "file":case "image":case "radio":case "submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}};d.prototype.sendClick=function(a,b){var c,d;document.activeElement&&
document.activeElement!==a&&document.activeElement.blur();d=b.changedTouches[0];c=document.createEvent("MouseEvents");c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null);c.forwardedTouchEvent=!0;a.dispatchEvent(c)};d.prototype.determineEventType=function(a){return b&&"select"===a.tagName.toLowerCase()?"mousedown":"click"};d.prototype.focus=function(a){var b;f&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==
a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()};d.prototype.updateScrollParent=function(a){var b,c;b=a.fastClickScrollParent;if(!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c;a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)};d.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a};d.prototype.onTouchStart=function(a){var b,d,e;if(1<a.targetTouches.length)return!0;b=
this.getTargetElementFromEventTarget(a.target);d=a.targetTouches[0];if(f){e=window.getSelection();if(e.rangeCount&&!e.isCollapsed)return!0;if(!c){if(d.identifier&&d.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=d.identifier;this.updateScrollParent(b)}}this.trackingClick=!0;this.trackingClickStart=a.timeStamp;this.targetElement=b;this.touchStartX=d.pageX;this.touchStartY=d.pageY;a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault();return!0};
d.prototype.touchHasMoved=function(a){a=a.changedTouches[0];var b=this.touchBoundary;return Math.abs(a.pageX-this.touchStartX)>b||Math.abs(a.pageY-this.touchStartY)>b?!0:!1};d.prototype.onTouchMove=function(a){if(!this.trackingClick)return!0;if(this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))this.trackingClick=!1,this.targetElement=null;return!0};d.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):
a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};d.prototype.onTouchEnd=function(a){var d,h,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1;this.lastClickTime=a.timeStamp;d=this.trackingClickStart;this.trackingClick=!1;this.trackingClickStart=0;e&&(h=a.changedTouches[0],k=document.elementFromPoint(h.pageX-
window.pageXOffset,h.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent);h=k.tagName.toLowerCase();if("label"===h){if(d=this.findControl(k)){this.focus(k);if(b)return!1;k=d}}else if(this.needsFocus(k)){if(100<a.timeStamp-d||f&&window.top!==window&&"input"===h)return this.targetElement=null,!1;this.focus(k);this.sendClick(k,a);f&&"select"===h||(this.targetElement=null,a.preventDefault());return!1}if(f&&!c&&(d=k.fastClickScrollParent)&&d.fastClickLastScrollTop!==
d.scrollTop)return!0;this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a));return!1};d.prototype.onTouchCancel=function(){this.trackingClick=!1;this.targetElement=null};d.prototype.onMouse=function(a){return this.targetElement&&!a.forwardedTouchEvent&&a.cancelable?!this.needsClick(this.targetElement)||this.cancelNextClick?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0};d.prototype.onClick=function(a){if(this.trackingClick)return this.targetElement=
null,this.trackingClick=!1,!0;if("submit"===a.target.type&&0===a.detail)return!0;a=this.onMouse(a);a||(this.targetElement=null);return a};d.prototype.destroy=function(){var a=this.layer;b&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0));a.removeEventListener("click",this.onClick,!0);a.removeEventListener("touchstart",this.onTouchStart,!1);a.removeEventListener("touchmove",this.onTouchMove,!1);
a.removeEventListener("touchend",this.onTouchEnd,!1);a.removeEventListener("touchcancel",this.onTouchCancel,!1)};d.notNeeded=function(a){var c,d;if("undefined"===typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec("Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53")||[,0])[1])if(b){if((c=document.querySelector("meta[name=viewport]"))&&(-1!==c.content.indexOf("user-scalable=no")||31<d&&document.documentElement.scrollWidth<=
window.outerWidth))return!0}else return!0;return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction||27<=+(/Firefox\/([0-9]+)/.exec("Mozilla/5.0 (iPhone; CPU iPhone OS 7_0 like Mac OS X; en-us) AppleWebKit/537.51.1 (KHTML, like Gecko) Version/7.0 Mobile/11A465 Safari/9537.53")||[,0])[1]&&(c=document.querySelector("meta[name=viewport]"))&&(-1!==c.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth)?!0:"none"===a.style.touchAction||"manipulation"===
a.style.touchAction?!0:!1};d.attach=function(a,b){return new d(a,b)};"function"===typeof define&&"object"===typeof define.amd&&define.amd?define(function(){return d}):"undefined"!==typeof module&&module.exports?(module.exports=d.attach,module.exports.FastClick=d):window.FastClick=d}());